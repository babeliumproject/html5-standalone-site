var Cairngorm={};Cairngorm.FrontController=Class.extend({init:function(){this.commands={}},addCommand:function(a,b){a!=null&&(this.commands[a]=b,Cairngorm.EventDispatcher.addEventListener(a,this))},removeCommand:function(a){a!=null&&(this.commands[a]=null,delete this.commands[a])},executeCommand:function(a){(new this.commands[a.type](a.data)).execute()}});Cairngorm.EventDispatcher=function(){var a={};return{addEventListener:function(b,c){b!=null&&typeof c.executeCommand=="function"&&(a[b]=c)},dispatchEvent:function(b){a[b.type]!=null&&a[b.type].executeCommand(b)}}}();Cairngorm.Event=Class.extend({init:function(a,b){this.type=a;this.data=b!=null?b:{}},dispatch:function(){return Cairngorm.EventDispatcher.dispatchEvent(this)}});Cairngorm.Command=Class.extend({init:function(a){this.data=a},execute:function(){}});Cairngorm.HTTPServices=Class.extend({init:function(){this.services={}},getService:function(a){return this.services[a]},registerService:function(a,b){this.services[a]=b}});Cairngorm.HTTPService=Class.extend({POST:"post",GET:"get",init:function(a,b){this.target=a.target;this.method=a.method;this.service=b},call:function(a,b){a==null&&(a="");if(this.method==this.GET){var c=this.target+this.service+"&"+a;$.ajax({url:c,timeout:5E3,success:b.onResult,error:b.onFault})}else this.method==this.POST&&(c=this.target+this.service,$.ajax({type:"POST",url:c,data:a,timeout:5E3,success:b.onResult,error:b.onFault}))}});Cairngorm.ServiceLocator=function(){var a=new Cairngorm.HTTPServices;return{getHttpService:function(b){return a.getService(b)},registerHttpService:function(b,c){a.registerService(b,c)}}}();Cairngorm.VO=Class.extend({init:function(){},toJSON:function(){var a={},b;for(b in this)typeof this[b]!="function"&&(a[b]=this[b]);return a},toJSONStr:function(){var a="{",b;for(b in this.toJSON())a.length!=1&&(a+=","),a+='"'+b+'": "'+this[b]+'"';a+="}";return a},toBase64:function(){return Base64.encode(this.toJSONStr())}});
